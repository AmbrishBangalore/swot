<div class="edit-question form-horizontal"
    ng-class="{'fill-in': (question.type === 'FillInQuestion'),
               'multiple-choice': (question.type === 'MultipleChoiceQuestion')}">

    <!-- Header -->
    <div class="question-header">

        <!-- Question Number -->
        <div class="question-number ng-cloak" ng-if="showQuestionNumber">{{questionNumber}}.</div>

        <!-- Question Type Menu -->
        <div class="question-type-menu btn-group btn-group-sm">
            <button type="button" class="btn btn-default fill-in" ng-model="question.type" btn-radio="'FillInQuestion'">Fill In</button>
            <button type="button" class="btn btn-default multiple-choice" ng-model="question.type" btn-radio="'MultipleChoiceQuestion'">Multiple Choice</button>
        </div>

        <!-- Question Actions Menu -->
        <div class="question-actions-container">
            <div class="question-actions">

                <!-- Settings -->
                <button tooltip="{{ui.showingSettings ? 'Hide Options' : 'Show Options'}}" class="toggle-settings btn btn-sm btn-default"
                    ng-show="question.type === 'FillInQuestion'"
                    ng-click="ui.showingSettings = !ui.showingSettings" ng-class="{'active': ui.showingSettings}"
                    type="button" tabindex="-1">
                    <span class="glyphicon glyphicon-cog"></span>
                </button>

                <!-- Copy -->
                <button tooltip="Copy" class="copy-question btn btn-sm btn-default" ng-if="showCopy"
                    ng-click="onCopy(questionNumber)" type="button" tabindex="-1">
                    <i class="fa fa-copy"></i>
                </button>

                <!-- Move -->
                <span tooltip="Move" class="drag-handle btn btn-sm btn-default" ng-if="showReorder">
                    <span class="glyphicon glyphicon-move"></span>
                </span>

                <!-- Delete -->
                <!-- Use a wrapper elem because both the tooltip and the confirm-button directives
                     want an isolate scope, so they can't both be on the same element. -->
                <span class="delete-wrapper" tooltip="Delete">
                    <button class="delete-question btn btn-sm btn-default" ng-if="showDelete" type="button"
                        confirm-button="onDelete(questionNumber)" message="Are you sure you want to remove this question?"
                        classes="confirm-popover" placement-callback='popoverPlacementCallback()' tabindex="-1">

                        <span class="glyphicon glyphicon-trash"></span>
                    </button>
                </span>

            </div>
        </div>
    </div>

    <!-- Question -->
    <div class="question form-group">
        <div class="question-editor" ckedit="{{ckEditorConfig}}" ng-model="question.questionHtml" focus-on="newQuestionReady"></div>
    </div>

    <!-- Answer -->
    <div class="answer form-group">

        <!-- Fill In -->
        <div ng-show="question.type === 'FillInQuestion'" class="question-editor-row answer-container fill-in">
            <label class="control-label col-ms-2 col-sm-2">Answer:</label>
            <div class="col-ms-10 col-sm-10">

                <!-- Fill In Answer Field -->
                <input type="text" name="answer" ng-model="question.answer" class="fill-in-answer form-control" placeholder="Answer"
                    ng-keydown="handleAnswerKeypress($event)" auto-grow="auto-grow" max-width="443" >
                
                <!-- Settings Toggle Button -->
                <!--
                <button type="button" class="toggle-settings btn btn-default"
                    ng-click="ui.showingSettings = !ui.showingSettings"
                    ng-class="{'active': ui.showingSettings}">
                    <span class="fa fa-caret-right" ng-show="!ui.showingSettings"></span>
                    <span class="fa fa-caret-down" ng-show="ui.showingSettings"></span>
                    <span class="glyphicon glyphicon-cog"></span>
                </button>
                -->

            </div>
        </div>

        <!-- Multiple Choice -->
        <div ng-show="question.type === 'MultipleChoiceQuestion'" class="answer-container multiple-choice">
            <label class="control-label col-ms-2 col-sm-2">Choices:</label>
            <div class="col-ms-10 col-sm-10">
                <ul class="choices">
                    <li class="choice" ng-repeat="(i, choice) in question.choices track by $index">
                        <div class="choice-row">
                            <div class="input-group input-group-sm">
                                <span class="input-group-btn">
                                    <button type="button" class="btn btn-sm btn-default marker" ng-class="{correct: question.correctAnswerIndex === i}" ng-model="question.correctAnswerIndex" btn-radio="i">
                                        <span class="glyphicon glyphicon-ok"></span>
                                    </button>
                                </span>
                                <input type="text" ng-model="question.choices[i]" class="choice-editor form-control"
                                    auto-grow="auto-grow" max-width="443">
                                <span class="choice-actions btn-group">
                                    
                                    <!-- No support yet for reordering choices
                                    <button type="button" class="btn btn-sm btn-default drag-handle">
                                        <span class="glyphicon glyphicon-move"></span>
                                    </button>
                                    -->

                                    <button type="button" class="btn btn-sm btn-default remove-choice" ng-click="removeChoice(i)">
                                        <span class="glyphicon glyphicon-trash"></span>
                                    </button>
                                </span>
                            </div>
                        </div>
                    </li>
                </ul>
                <div class="row">
                    <div class="col-xs-12">
                        <button ng-click="addChoice()" type="button" class="btn btn-sm btn-default add-choice">
                            <span class="glyphicon glyphicon-plus"></span> Add
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Options -->
    <div class="settings form-group">
        <div class="question-editor-row" collapse="!ui.showingSettings">
            <label class="control-label col-ms-2 col-sm-2">Options:</label>
            <div class="col-ms-10 col-sm-10">

                <!-- Fill In Options -->
                <div class="settings-container fill-in" ng-show="question.type === 'FillInQuestion'">
                    <div class="checkbox setting">
                        <label>
                            <input type="checkbox" ng-model="question.ignoreCase" class="ignore-case"> Ignore capitalization
                        </label>
                        <span class="help-icon fa fa-question-circle" tooltip='Ignore differences in capitalization when grading submissions (consider "Answer" same as "answer").'></span>
                    </div>
                </div>

            </div>
        </div>
    </div>
    
</div>
